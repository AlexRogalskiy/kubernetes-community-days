{{ $eventUrl := .Params.url }}
{{ $start    := .Date }}
{{ $end      := .Params.end }}
{{ $location := .Params.location }}
{{ $country  := $location.country }}
{{ $city     := $location.city }}
{{ $venue    := $location.venue }}
{{ $social   := .Params.social }}
{{ $title    := .Title }}
{{ $event    := .CurrentSection.Title }}
{{ $mainUrl  := .CurrentSection.RelPermalink }}
{{ $isRoot   := eq .CurrentSection .FirstSection }}
<section class="hero">
  <div class="hero-body">
    <div class="container">
      <p class="title is-size-1 is-size-2-mobile has-text-weight-light">
        {{ $title }}
      </p>

      {{ if and (not $isRoot) (ne .File.LogicalName "_index.md") }}
      <p class="subtitle">
        <a href="{{ $mainUrl }}">
          {{ $event }}
        </a>
      </p>
      {{ end }}

      {{ if or $start $location }}
      <div class="is-size-4 is-size-5-mobile has-text-weight-bold is-spaced">
        {{ with $start }}
        {{ $month    := dateFormat "January" . }}
        {{ $startDay := dateFormat "2" . }}
        {{ $year     := dateFormat "2006" . }}
        <p>
          {{ $month }} {{ $startDay }}{{ with $end }}&ndash;{{ dateFormat "2" (time .) }}{{ end }}, {{ $year }}
        </p>
        {{ end }}

        {{ with $location }}
        <p class="is-size-4 is-size-5-mobile has-text-grey">
          {{ with .city }}{{ . }}{{ end }}
          {{- with .country  }}, {{ . }}{{ end }}
        </p>

        {{ if .venue }}
        <p>
          {{ if .url }}
          <a href="{{ .url }}">
            {{ .venue }}
          </a>
          {{ else }}
          {{ .venue }}
          {{ end }}
        </p>
        {{ end }}
        {{ end }}
      </div>
      {{ end }}

      {{ with $eventUrl }}
      <a class="is-size-5 is-size-6-mobile" href="{{ . }}" target="_blank">
        {{ . }}
      </p>
      {{ end }}

      {{ with $social }}
      <br />
      {{ partial "social-buttons.html" (dict "social" .) }}
      {{ end }}
    </div>
  </div>
</section>
